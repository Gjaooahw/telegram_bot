
from currency_converter import CurrencyConverter
from telebot import types
currency = CurrencyConverter()
amount=0
bot = telebot.TeleBot("8212863055:AAFFRa2AHNQ1b36pNBiiECthSzFQlMUcjQc")
@bot.message_handler(commands=['start'])
def start(message):
    bot.send_message(message.chat.id,"Привет,введите сумму")
    bot.register_next_step_handler(message, sum)
    return

def sum(message):
    global amount
    try:
     amount = int(message.text.strip())
    except ValueError:
     bot.send_message(message.chat.id, "Привет,введи заново сумму")
     bot.register_next_step_handler(message, sum)
    button = types.InlineKeyboardMarkup(row_width=2)
    btn = types.InlineKeyboardButton("USD/EUR", callback_data="usd/eur")
    btn2 = types.InlineKeyboardButton("EUR/USD", callback_data="eur/usd")
    button.add(btn, btn2)
    bot.send_message(message.chat.id, "Выберите пару валют",reply_markup=button)

@bot.callback_query_handler(func=lambda call: True)
def callback(call):
    value = call.data.upper().split("/")
    res=currency.convert(amount,value[0],value[1])
    bot.send_message(call.message.chat.id,f"Получается {round(res,2)}")
    bot.register_next_step_handler(call.message, sum)
bot.polling(none_stop=True)
#ну крч пишешь елс а потом там выводится сообщение и ты пишешь ему со слэшом в ответ чтото и некст степ ждет пока ты напишешь,потом срабатывает триггер и функция принимает твое сообщение а потом копируешь тоже самое что и в кол и юзаешь некст степ чтобы перенаправить
